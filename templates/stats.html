{% extends "base.html" %}
{% block title %}laurel_updates - statistics{%endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="/static/css/table.css" />
{% endblock %}

{% block content %}
<div class="navigation-top">
    <span><a href="/">{% block routename %}← laurel_updates{% endblock %}</a></span>
    <span class="backbtn" onclick="navigator.clipboard.writeText(`https://devlocalhost.github.io${window.location.pathname}`)">↑ erahS</span>
</div>
<h1 class="colored" onclick="toggleStylesheet()">Statistics</h1>

<h2>Debugging</h2>
<ul>
    <li>Commit: <code>{{ data[2] }}</code></li>
    <li>Platform: <code>{{ data[3] }}</code></li>
    <li>Region: {{ data[4] }}</li>
</ul>

<h2>Site analytics</h2>
<p>Statistics fetched from vercel analytics (privacy friendly!). Includes all pages that users visited since February 1 - February 28.</p>

<div style="overflow-x: auto; max-width: 100%;">
    <table>
        <thead>
            <tr>
                <td class="first-td-left">Page</td>
                <td>Views</td>
                <td class="first-td-right">Visitors</td>
            </tr>
        </thead>
        
        <tbody>
            {% for stats_data in data[1]["statistics"][:-1] %}
            <tr>
                <td><a href="{{ stats_data['page'] }}">{{ stats_data['page'] }}</a></td>
                <td>{{ stats_data['visitors']['total'] }}</td>
                <td>{{ stats_data['visitors']['unique'] }}</td>
            </tr>
            {% endfor %}

            {% set last_entry = data[1]["statistics"][-1] %}
            <tr>
                <td class="last-td-left"><a href="{{ last_entry['page'] }}">{{ last_entry['page'] }}</a></td>
                <td>{{ last_entry['visitors']['total'] }}</td>
                <td class="last-td-right">{{ last_entry['visitors']['unique'] }}</td> 
            </tr>
        </tbody>
    </table>
</div>

<!-- <table border="1" width="100%"> -->
<!--     <tr> -->
<!--         <td style="width: 300px;"> -->
<!--             <div style="background-color: #444; width: 80%; height: 30px; border-radius: 5px;  -->
<!--                         display: flex; color: white; font-weight: bold;"> -->
<!--                 /roms -->
<!--             </div> -->
<!--         </td> -->
<!--     </tr> -->
<!--     <tr> -->
<!--         <td style="width: 300px;"> -->
<!--             <div style="background-color: #444; width: 50%; height: 30px; border-radius: 5px;  -->
<!--                         display: flex; color: white; font-weight: bold;"> -->
<!--                 /blog/news -->
<!--             </div> -->
<!--         </td> -->
<!--     </tr> -->
<!-- </table> -->

{% endblock %}
